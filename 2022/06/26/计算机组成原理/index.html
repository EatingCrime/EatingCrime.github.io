<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="计算机组成原理, OrigiN">
    <meta name="description" content="计算机组成原理第一章  计算机系统概论1、非时间指标机器字长定义：机器一次能处理的二进制位数

由运算器、寄存器的位数决定；
一般与内部寄存器的位数相等；
字长决定数据表示范围与精度；
目前常见的有32位和64位字长。

总线宽度定义：数据">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>计算机组成原理 | OrigiN</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">OrigiN</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">OrigiN</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/15.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">计算机组成原理</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/log/" class="post-category">
                                log
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-06-26
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="计算机组成原理"><a href="#计算机组成原理" class="headerlink" title="计算机组成原理"></a>计算机组成原理</h1><h3 id="第一章-计算机系统概论"><a href="#第一章-计算机系统概论" class="headerlink" title="第一章  计算机系统概论"></a>第一章  计算机系统概论</h3><h4 id="1、非时间指标"><a href="#1、非时间指标" class="headerlink" title="1、非时间指标"></a>1、非时间指标</h4><h5 id="机器字长"><a href="#机器字长" class="headerlink" title="机器字长"></a>机器字长</h5><p><strong>定义：</strong>机器一次能处理的二进制位数</p>
<ul>
<li>由<strong>运算器、寄存器的位数</strong>决定；</li>
<li>一般<strong>与内部寄存器的位数相等</strong>；</li>
<li>字长决定数据表示范围与精度；</li>
<li>目前常见的有32位和64位字长。</li>
</ul>
<h5 id="总线宽度"><a href="#总线宽度" class="headerlink" title="总线宽度"></a>总线宽度</h5><p><strong>定义：</strong>数据总线一次能并行传送的最大信息位数</p>
<h5 id="主存容量与存储带宽"><a href="#主存容量与存储带宽" class="headerlink" title="主存容量与存储带宽"></a>主存容量与存储带宽</h5><p><strong>主存容量：</strong>是指一台计算机主存能存储的最大信息量。</p>
<p><strong>存储带宽：</strong> 指单位时间内与主存交换的二进制信息量，单位Byte&#x2F;s。   (影响存储带宽的指标包括数据位宽和数据传输速率)。</p>
<h4 id="2、时间指标"><a href="#2、时间指标" class="headerlink" title="2、时间指标"></a>2、时间指标</h4><h5 id="主频-f"><a href="#主频-f" class="headerlink" title="主频 f"></a>主频 f</h5><p>CPU工作的时钟频率，与CPU运算能力之间不是唯一的、直接关系；</p>
<h5 id="时钟周期T-x3D-1-x2F-f"><a href="#时钟周期T-x3D-1-x2F-f" class="headerlink" title="时钟周期T &#x3D; 1&#x2F;f"></a>时钟周期T &#x3D; 1&#x2F;f</h5><p>计算机中最基本的、最小的时间单位。一个时钟周期CPU仅完成一个最基本的动作；（也称为CPU周期）</p>
<h5 id="外频"><a href="#外频" class="headerlink" title="外频"></a>外频</h5><p>系统总线的工作频率，CPU与主板之间同步运行的速度，标准外频66MHz、100MHz、133MHz、200MHz、400MHz</p>
<h5 id="倍频"><a href="#倍频" class="headerlink" title="倍频"></a>倍频</h5><p>主频&#x3D;外频×倍频 ， Pentium 4 2.4G 主频  2400M &#x3D; 133M (外频) × 18 (倍频)</p>
<p>调整倍频可以获得较高的主频，486后出现的技术，使得外设低频，CPU高频</p>
<h4 id="x3D-x3D-3、CPI-x3D-x3D"><a href="#x3D-x3D-3、CPI-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;3、CPI&#x3D;&#x3D;"></a>&#x3D;&#x3D;3、CPI&#x3D;&#x3D;</h4><p>(Clock cycles Per Instruction)：执行一条指令 (平均) 需要的时钟周期数</p>
<p>CPI &#x3D; 一段程序中所有指令的时钟周期数之和 &#x2F; 指令条数        &#x2F;&#x2F;统计       </p>
<p>​      &#x3D; 程序中各类指令的CPI  ×  程序中该类指令的比例           &#x2F;&#x2F;加权</p>
<h4 id="x3D-x3D-4、MIPS-x3D-x3D"><a href="#x3D-x3D-4、MIPS-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;4、MIPS&#x3D;&#x3D;"></a>&#x3D;&#x3D;4、MIPS&#x3D;&#x3D;</h4><p> (Million Instructions  Per Second) ：表示每秒钟执行指令的条数  (以百万条为单位)</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220619172733798.png" alt="image-20220619172733798"></p>
<h4 id="5、CPU执行"><a href="#5、CPU执行" class="headerlink" title="5、CPU执行"></a>5、CPU执行</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220619173109951.png" alt="image-20220619173109951"></p>
<h3 id="第二章-计算机中的信息表示方式"><a href="#第二章-计算机中的信息表示方式" class="headerlink" title="第二章  计算机中的信息表示方式"></a>第二章  计算机中的信息表示方式</h3><h4 id="1、进制转换"><a href="#1、进制转换" class="headerlink" title="1、进制转换"></a>1、进制转换</h4><h5 id="①十进制→二进制"><a href="#①十进制→二进制" class="headerlink" title="①十进制→二进制"></a>①十进制→二进制</h5><p>整数部分:除2取余倒排,直到商为0 ;<br>小数部分:乘2取整顺排,直到小数位为0 ;  </p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618151305155.png" alt="image-20220618151305155"></p>
<h5 id="②二进制转到八进制-从小数点向左右三位一组"><a href="#②二进制转到八进制-从小数点向左右三位一组" class="headerlink" title="②二进制转到八进制           从小数点向左右三位一组"></a>②二进制转到八进制           从小数点向左右三位一组</h5><p>   (10 011 100 . 01 )2<br>   (10 011 100 . 010)2 &#x3D; ( 234 . 2 )8                           </p>
<h5 id="③二进制转十六进制-从小数点向左右四位一组"><a href="#③二进制转十六进制-从小数点向左右四位一组" class="headerlink" title="③二进制转十六进制          从小数点向左右四位一组"></a>③二进制转十六进制          从小数点向左右四位一组</h5><p>   (1001 1100 . 01    )2<br>   (1001 1100 . 0100)2  &#x3D; ( 9C . 4 )16 </p>
<p>小数部分不足位数要补零凑足，否则出错</p>
<h4 id="2、原码"><a href="#2、原码" class="headerlink" title="2、原码"></a>2、原码</h4><p>最高位为符号位，0：正，1：负，数值位不变</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152045979.png" alt="image-20220618152045979"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152124964.png" alt="image-20220618152124964"></p>
<h4 id="3、补码"><a href="#3、补码" class="headerlink" title="3、补码"></a>3、补码</h4><p>真值为<strong>正数</strong>，补码等于原数据；真值为<strong>负数</strong>，增加一个模</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152616614.png" alt="image-20220618152616614"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152637062.png" alt="image-20220618152637062"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152720300.png" alt="image-20220618152720300"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152759338.png" alt="image-20220618152759338"></p>
<p>机器零唯一，负数比正数多一个</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618152929721.png" alt="image-20220618152929721"></p>
<h4 id="4、移码"><a href="#4、移码" class="headerlink" title="4、移码"></a>4、移码</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618153430682.png" alt="image-20220618153430682"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618153518178.png" alt="image-20220618153518178"></p>
<h4 id="5、定点数的表示方法"><a href="#5、定点数的表示方法" class="headerlink" title="5、定点数的表示方法"></a>5、定点数的表示方法</h4><p><strong>定点表示：</strong>约定机器中所有数据的小数点位置是固定不变的。由于约定在固定的位置，小数点就不再使用记号“.”来表示。通常将数据表示成<strong>纯小数</strong>或<strong>纯整数</strong>。</p>
<p>C语言中的定点数</p>
<ul>
<li>无符号整数<ul>
<li>unsigned char 、unsigned short、unsigned  int </li>
<li>一般用于地址运算，编号表示，</li>
<li>指针是什么数据类型？</li>
</ul>
</li>
<li>有符号整数<ul>
<li>char、short、int、long</li>
<li>采用补码表示</li>
</ul>
</li>
<li>无符号整数最大值 &gt; 相同位数符号整数最大值<ul>
<li>8位无符号整数  最大是255（1111 1111）</li>
<li>8位有符号整数  最大为127（0111 1111）</li>
</ul>
</li>
</ul>
<h4 id="6、浮点数的表示方法"><a href="#6、浮点数的表示方法" class="headerlink" title="6、浮点数的表示方法"></a>6、浮点数的表示方法</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618155738567.png" alt="image-20220618155738567"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618160000566.png" alt="image-20220618160000566"></p>
<p> 由于基数在系统中是隐含约定的，不需要用代码表示，所以浮点数只需用一对定点数（阶码和尾数）表示，其中，数符表示数的正负，阶码表示小数点的位置，而尾数表示有效数字。</p>
<h5 id="x3D-x3D-规格化的浮点数-x3D-x3D"><a href="#x3D-x3D-规格化的浮点数-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;规格化的浮点数&#x3D;&#x3D;"></a>&#x3D;&#x3D;规格化的浮点数&#x3D;&#x3D;</h5><p>为了提高运算的精度，需要充分地利用尾数的有效数位，通常采取规格化的浮点数形式，即规定尾数M的<strong>最高数位</strong>必须是一个有效值<strong>（1）</strong>。如果尾数不是规格化数,要用<strong>修改阶码同时尾数移位</strong>的方法把他变为规格化数.</p>
<h5 id="x3D-x3D-IEEE754标准-x3D-x3D"><a href="#x3D-x3D-IEEE754标准-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;IEEE754标准&#x3D;&#x3D;"></a>&#x3D;&#x3D;IEEE754标准&#x3D;&#x3D;</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220618161025763.png" alt="image-20220618161025763"></p>
<ul>
<li><p><strong>注意：</strong></p>
<ul>
<li>阶码E采用移码表示，注意其<strong>偏移量是127</strong>而不是标准的128</li>
<li>尾数M为定点小数，小数点固定在M最左侧，且<strong>小数点左边还有一个隐藏的1</strong>，完整尾数形式为1.M</li>
</ul>
<p><strong>例题：</strong></p>
</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image20220618161118.jpg" alt="image20220618161118"></p>
<h3 id="第三章-运算方法和运算部件"><a href="#第三章-运算方法和运算部件" class="headerlink" title="第三章  运算方法和运算部件"></a>第三章  运算方法和运算部件</h3><h4 id="1、补码加减法的实现"><a href="#1、补码加减法的实现" class="headerlink" title="1、补码加减法的实现"></a>1、补码加减法的实现</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620101139240.png" alt="image-20220620101139240"></p>
<h5 id="单符号溢出检测方法"><a href="#单符号溢出检测方法" class="headerlink" title="单符号溢出检测方法"></a>单符号溢出检测方法</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620101441295.png" alt="image-20220620101441295"></p>
<h5 id="双符号（变形补码）溢出检测方法"><a href="#双符号（变形补码）溢出检测方法" class="headerlink" title="双符号（变形补码）溢出检测方法"></a>双符号（变形补码）溢出检测方法</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620101500564.png" alt="image-20220620101500564"></p>
<p>“01”上溢，“10”下溢</p>
<h4 id="2、-x3D-x3D-定点乘法运算-x3D-x3D"><a href="#2、-x3D-x3D-定点乘法运算-x3D-x3D" class="headerlink" title="2、&#x3D;&#x3D;定点乘法运算&#x3D;&#x3D;"></a>2、&#x3D;&#x3D;定点乘法运算&#x3D;&#x3D;</h4><h5 id="无符号整数乘法运算"><a href="#无符号整数乘法运算" class="headerlink" title="无符号整数乘法运算"></a>无符号整数乘法运算</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620104342133.png" alt="image-20220620104342133"></p>
<h5 id="原码一位乘法运算"><a href="#原码一位乘法运算" class="headerlink" title="原码一位乘法运算"></a>原码一位乘法运算</h5><p><strong>运算规则：</strong></p>
<p>① 参加运算的操作数取其双符号数原码数值绝对值；<br>② 令乘数的最低位为判断位，若为“1”，加被乘数，若为“0”，不加被乘数（加0）；<br>③ 累加后的部分积右移一位；<br>④ 重复n次②和③；<br>⑤ 符号位单独处理，同号为正，异号为负。 </p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620104749913.png" alt="image-20220620104749913"></p>
<h5 id="定点补码一位乘法"><a href="#定点补码一位乘法" class="headerlink" title="定点补码一位乘法"></a>定点补码一位乘法</h5><p>Booth乘法规则如下：</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620105059472.png" alt="image-20220620105059472"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620110247278.png" alt="image-20220620110247278"></p>
<h4 id="3、定点除法运算"><a href="#3、定点除法运算" class="headerlink" title="3、定点除法运算"></a>3、定点除法运算</h4><h5 id="恢复余数除法"><a href="#恢复余数除法" class="headerlink" title="恢复余数除法"></a>恢复余数除法</h5><ul>
<li>如何判断是否够减<ul>
<li>利用补码作减法，<strong>判断余数符号</strong>即可</li>
</ul>
</li>
<li>余数为<strong>负数</strong>时，必须<strong>恢复余数</strong><ul>
<li>将余数加除数，恢复成<strong>原值</strong></li>
</ul>
</li>
<li>求<strong>下一位商</strong>，必须将余数<strong>左移一位</strong>，再与除数比较<ul>
<li>手工运算将除数右移？</li>
<li>注意这里余数放大了，<strong>最后结果要缩小</strong></li>
</ul>
</li>
<li>比较，上商（恢复），余数移位，再比较，<ul>
<li>直到商的位数足够</li>
</ul>
</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620112119346.png" alt="image-20220620112119346"></p>
<h5 id="不恢复余数除法-加减交替法"><a href="#不恢复余数除法-加减交替法" class="headerlink" title="不恢复余数除法(加减交替法)"></a>不恢复余数除法(加减交替法)</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620112531002.png" alt="image-20220620112531002"></p>
<p><strong>注意：</strong> 在定点小数除法运算时，为了防止溢出，要求被除数的绝对值小于除数的绝对值，即|X|＜|Y|，且除数不能为0。另外，在原码加减交替法中，当最终余数为负数时，必须恢复一次余数，使之变为真余数，注意此时不需要再左移了。</p>
<h4 id="4、-x3D-x3D-浮点运算-x3D-x3D"><a href="#4、-x3D-x3D-浮点运算-x3D-x3D" class="headerlink" title="4、&#x3D;&#x3D;浮点运算&#x3D;&#x3D;"></a>4、&#x3D;&#x3D;浮点运算&#x3D;&#x3D;</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620122806.jpg" alt="image-20220620122806"></p>
<h5 id="结果规格化"><a href="#结果规格化" class="headerlink" title="结果规格化"></a>结果规格化</h5><p>结果规格化就是使运算结果成为规格化数。为了处理方便，可让尾数的符号位扩展为双符号位，当尾数运算结果不是11.0……或00.1……的形式时，应进行相应的规格化处理。</p>
<p>当尾数符号位为 <strong>01 或 10 时，运算结果上溢，需要向右规格化</strong>，且只需将尾数右移一位,同时将结果的阶码值加1。</p>
<p>当尾数运算结果为<strong>11.1……或00.0……时需要向左规格化</strong>，而且左移次数不固定，与运算结果的形式有关。向左规格化时尾数连同符号位一起左移，直到尾数部分出现11.0……或00.1……的形式为止。向左规格化时阶码做减法，左移多少位就减多少。</p>
<h5 id="舍入"><a href="#舍入" class="headerlink" title="舍入"></a>舍入</h5><p>在尾数进行向右规格化操作时，尾数末尾的几位会因超出计算机字长而被丢掉，从而产生误差。这时，计算机可以按选定的方式进行舍入操作。常用的舍入方法如下。</p>
<p><strong>末位恒置1法：</strong>只要因移位而丢失的位中有一位是1，就把运算结果的最低位置1，而不管最低位原来是0还是1。</p>
<p><strong>0舍1入法：</strong>当丢失位数的最高位是1 时将尾数的末位加1，类似于十进制数的四舍五入。注意舍入操作可能会破坏规格化结果，所以舍入操作后还需要再次进行规格化处理。</p>
<h5 id="溢出判断"><a href="#溢出判断" class="headerlink" title="溢出判断"></a>溢出判断</h5><p>由于浮点数中阶码的位数决定数的表示范围，因此对浮点运算而言，当阶码出现溢出时表示运算结果溢出，即当<strong>阶码的符号位为 01 和 10 时才表示运算结果溢出</strong>。</p>
<h3 id="第四章-存储系统"><a href="#第四章-存储系统" class="headerlink" title="第四章  存储系统"></a>第四章  存储系统</h3><h4 id="1、常用概念"><a href="#1、常用概念" class="headerlink" title="1、常用概念"></a>1、常用概念</h4><ol>
<li><strong>位</strong>是二进制数的最基本单位，也是存储器存储信息的最小单位。</li>
<li>一个二进制数由若干位组成，当这个二进制数作为一个整体存入或取出时，这个数称为<strong>存储字</strong>。</li>
<li>存放存储字或存储字节的主存空间称为<strong>存储单元或主存单元</strong>，大量存储单元的集合构成一个<strong>存储体</strong>，程序和数据都存放在存储体中，它是存储器的核心。</li>
<li><strong>小端存储</strong>：字地址等于<strong>最低</strong>有效字节地址</li>
<li><strong>大端存储</strong>：字地址等于<strong>最高</strong>有效字节地址</li>
</ol>
<h4 id="2、半导体存储器"><a href="#2、半导体存储器" class="headerlink" title="2、半导体存储器"></a>2、半导体存储器</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620153155081.png" alt="image-20220620153155081"></p>
<h5 id="随机存取存储器RAM"><a href="#随机存取存储器RAM" class="headerlink" title="随机存取存储器RAM"></a>随机存取存储器RAM</h5><p>​       CPU可以对RAM单元的内容随机地读写访问。CPU对任何一个存储单元的读写时间是一样的，即<strong>存取时间是相同的</strong>。</p>
<h6 id="SRAM"><a href="#SRAM" class="headerlink" title="SRAM"></a>SRAM</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620153831160.png" alt="image-20220620153831160"></p>
<p>存储体（256×128×8）<br>通常把各个字的同一个字的同一位集成在一个芯片（32K×1）中，32K位排成256×128的矩阵。8个片子就可以构成32KB。</p>
<p>地址译码器<br>采用双译码的方式（减少选择线的数目）。<br>A0 ~ A7为行地址译码线<br>A8 ~ A14为列地址译码线</p>
<h6 id="DRAM"><a href="#DRAM" class="headerlink" title="DRAM"></a>DRAM</h6><p>动态存储器，是用<strong>金属氧化物半导体（MOS）</strong>的单个MOS管来存储一个二进制位（bit）信息的。信息被存储在MOS管T的源极的寄生电容CS中，例如，用CS中存储有电荷表示1，无电荷表示0。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620154351672.png" alt="image-20220620154351672"></p>
<h6 id="x3D-x3D-DRAM刷新-x3D-x3D"><a href="#x3D-x3D-DRAM刷新-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;DRAM刷新&#x3D;&#x3D;"></a>&#x3D;&#x3D;DRAM刷新&#x3D;&#x3D;</h6><p><strong>刷新：</strong>定期补充电荷以避免电荷泄露引起的信息丢失，电容存在泄露电流</p>
<p><strong>刷新周期:</strong>  存储器两次完整刷新之间的时间间隔<br>信息存储到泄漏之间必须完成刷新，称为最大刷新周期</p>
<p><strong>按行刷新</strong>：存储体采用双译码结构，刷新地址计数器给出刷新行地址</p>
<p><strong>刷新方式</strong>：集中式刷新、分散式刷新和异步式刷新</p>
<h6 id="集中刷新方式"><a href="#集中刷新方式" class="headerlink" title="集中刷新方式"></a>集中刷新方式</h6><p>刷新周期：2ms，在数据丢失之前集中刷新所有行。<strong>存在死区</strong>，用在实时要求不高的场合</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620155843710.png" alt="image-20220620155843710"></p>
<h6 id="分散刷新方式"><a href="#分散刷新方式" class="headerlink" title="分散刷新方式"></a>分散刷新方式</h6><p>刷新周期：2ms，读写+刷新   <strong>各刷新周期分散安排在存取周期中</strong><br>刷新次数  2ms&#x2F;100ns&#x3D;20000次   <strong>较浪费</strong>，用在低速系统中</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620155938197.png" alt="image-20220620155938197"></p>
<h6 id="异步刷新方式"><a href="#异步刷新方式" class="headerlink" title="异步刷新方式"></a>异步刷新方式</h6><p>刷新周期：2ms，各刷新周期分散安排在2ms内，每隔2ms&#x2F;128&#x3D;15.5微秒刷新一行,将128次刷新分散，<strong>最常用</strong></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620160041270.png" alt="image-20220620160041270"></p>
<h6 id="动态-RAM-和静态-RAM-的比较"><a href="#动态-RAM-和静态-RAM-的比较" class="headerlink" title="动态 RAM 和静态 RAM 的比较"></a>动态 RAM 和静态 RAM 的比较</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620160209084.png" alt="image-20220620160209084"></p>
<h5 id="只读存储器ROM"><a href="#只读存储器ROM" class="headerlink" title="只读存储器ROM"></a>只读存储器ROM</h5><p>​      ROM可以看作RAM的一种特殊方式，存储器的内容<strong>只能随机读出而不能写入</strong>。即使停电，所存储的内容也不会丢失。</p>
<p>1、掩模式只读存储器（ROM）<br>      用二极管或晶体管作为元件，以元件的“有&#x2F;无”来表示存储单元的信息。该信息由芯片制造商在制造时写入内容，以后只能读，不能再次写入。<br>2、可编程只读存储器（PROM）<br>      一次性写入内容存储器，以熔丝的接通或断开来表示所存的信息为“1”或“0”，可由用户根据需要一次性写入内容，掉电后不会影响其存储内容<br>3、可擦可编程只读存储器（EPROM）<br>     用紫外线擦除写入内容，在高压作用下注入电子；可多次编程<br>4、可电擦可编程只读存储器（E²PROM）<br>     每个存储元采用两个晶体管，具有电擦除功能</p>
<h4 id="3、-x3D-x3D-存储器与CPU连接-x3D-x3D"><a href="#3、-x3D-x3D-存储器与CPU连接-x3D-x3D" class="headerlink" title="3、&#x3D;&#x3D;存储器与CPU连接&#x3D;&#x3D;"></a>3、&#x3D;&#x3D;存储器与CPU连接&#x3D;&#x3D;</h4><h5 id="位扩展法"><a href="#位扩展法" class="headerlink" title="位扩展法"></a>位扩展法</h5><p>只加大字长，而存储器的字数与存储器芯片字数一致,对片子没有选片要求</p>
<p>利用256K×1位的SRAM存储芯片组成256K×32位的存储器并于CPU连接</p>
<p>与 CPU 连接时，将 32 个存储芯片的地址线（18 根）、读写控制线各自并联，并分别与CPU 的地址线和读写控制线相连；同时将所有存储芯片的片选端均与CPU的MREQ#信号相连，只有这样才能保证 32 个芯片同时被选中；将 32 个存储芯片的数据线分别连到 CPU 的 32 位数据线上，具体连接如图 4.24 所示。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620163516652.png" alt="image-20220620163516652"></p>
<h5 id="字扩展法"><a href="#字扩展法" class="headerlink" title="字扩展法"></a>字扩展法</h5><p>仅在字向扩充，而位数不变.需由片选信号来区分各片地址。</p>
<p>利用256K×8位的SRAM存储芯片组成2M×8位的存储器并于CPU相连</p>
<p>与 CPU 进行连接时，256K 的芯片对应 18 根地址线，CPU 访问 2M 的主存容量需要 21根地址线；可以将高 3 位地址 A20-18送入 3:8 译码器输入端，将 3:8 译码器的 8 个输出分别连接到8个SRAM芯片的片选信号 CS 端；将 CPU 内存请求信号 MREQ#连接到译码器使能端，只有进行存储访问时，译码器才能进行工作，否则译码器输出全0（假设高电平有效），所有存储芯片均不被选中，输出为高阻态。存储器字扩展的具体连接如图所示。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620163313956.png" alt="image-20220620163313956"></p>
<h4 id="4、高速缓冲存储器cache"><a href="#4、高速缓冲存储器cache" class="headerlink" title="4、高速缓冲存储器cache"></a>4、高速缓冲存储器cache</h4><p><strong>用途</strong>：设置在 CPU 和 主存储器之间，完成高速与 CPU 交换信息，尽量避免 CPU不必要地多次直接访问速度要慢一些的主存储器，从而提高计算机系统的运行效率。</p>
<p><strong>实现</strong>：这是一个存储容量很小、但读写速度更快、以<strong>关联存储器方式</strong>运行、用<strong>静态存储器芯片(SRAM)实现的存储器。</strong></p>
<p><strong>要求</strong>：有足够高的命中率，既当 CPU需用主存中的数据时，多数情况可以直接从Cache中得到，称二者之比为<strong>命中率</strong>。</p>
<h5 id="①数据查找"><a href="#①数据查找" class="headerlink" title="①数据查找"></a>①数据查找</h5><h6 id="相联存储器"><a href="#相联存储器" class="headerlink" title="相联存储器"></a>相联存储器</h6><p>相联存储器（Content Addressable Memory，CAM）是一种<strong>按内容进行访问的存储器</strong>，用于存放查找表，其内部存储的基本数据单元是<strong>键值对</strong>（Key，Value）。CAM 的输入不是地址，而是<strong>检索关键字 key</strong>，输出则是该<strong>关键字对应的 value 值</strong>。相联存储器的基本原理如图所示。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620171412777.png" alt="image-20220620171412777"></p>
<p>图中包括 4 个键值对，每行都有一个键值对，其中一个有效位用于表示当前键值对是否有<br>效（为1时有效，为 0 时无效）；所有存储单元中的 key 字段同时与 CAM 输入的检索关键字进行并发比较，4 个存储单元共需要 4 个比较器，有效位为1 且比较结果相同则输出为 1。图中比较结果分别对应 L0～L3，这些比较结果将连接到对应三态门的控制端，当比较结果相符时，输出当前对应的 value 字段。L0～L3中只要有一个信号为 1 则表示查找成功，所以将L0～L3 进行逻辑或运算即可得到命中信号 hit。注意同—时刻L0～L3最多只能有一个信号为 1，否则会引起数据冲突。</p>
<h5 id="②地址映射"><a href="#②地址映射" class="headerlink" title="②地址映射"></a>②地址映射</h5><h6 id="全相联映射"><a href="#全相联映射" class="headerlink" title="全相联映射"></a>全相联映射</h6><p><strong>定义</strong>：主存中的每一个数据块都可以放置到cache的任意一个数据块中，是一对多的映射关系。只有cache满时才需要进行数据块置换。</p>
<p><strong>优点</strong>：cache利用率最高，冲突概率最低</p>
<p><strong>缺点</strong>：比较电路复杂，查找成本较高，需要CAM提供快速的查找空能。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620172521363.png" alt="image-20220620172521363"></p>
<p>将地址分为两部分（块号和字），在内存块写入Cache时，同时写入块号标记；<br>CPU给出访问地址后，也将地址分为两部分（块号和字），比较电路将块号与Cache 表中的标记进行比较，相同表示命中，访问相应单元；如果没有命中访问内存，CPU 直接访问内存，并将被访问内存的相对应块写入Cache。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620173330505.png" alt="image-20220620173330505"></p>
<h6 id="直接相连映射"><a href="#直接相连映射" class="headerlink" title="直接相连映射"></a>直接相连映射</h6><p><strong>定义</strong>：主存中的每一块只能被放置到Cache中唯一的一个位置。(循环分配)</p>
<p><strong>优点</strong>：标志位较短，比较电路的成本低。</p>
<p><strong>缺点</strong>：利用率低，命中率低，效率较低</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620173210336.png" alt="image-20220620173210336"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620173344514.png" alt="image-20220620173344514"></p>
<h6 id="x3D-x3D-组相联映射-x3D-x3D"><a href="#x3D-x3D-组相联映射-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;组相联映射&#x3D;&#x3D;"></a>&#x3D;&#x3D;组相联映射&#x3D;&#x3D;</h6><p><strong>定义</strong>：主存中的每一块可以被放置到Cache中唯一的一个组中的任何一个位置。</p>
<p>组相联映射将cache分成固定大小的组，每组有k行，称为k-路组相联；主存数据块首先采用直接相联映射的方式定位到cache中固定的组，然后采用全相联映射的方式映射到组内任何一个cache行</p>
<p>cache组号&#x3D;主存块号 mod（cache组数）</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620180120618.png" alt="image-20220620180120618"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620180331448.png" alt="image-20220620180331448"></p>
<p><font size="5"><strong>不同映射方式主存地址划分</strong></font> </p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620212550612.png" alt="image-20220620212550612"></p>
<h5 id="③替换策略"><a href="#③替换策略" class="headerlink" title="③替换策略"></a>③替换策略</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620213346308.png" alt="image-20220620213346308"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620213356395.png" alt="image-20220620213356395"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220620213409397.png" alt="image-20220620213409397"></p>
<h5 id="④写入策略"><a href="#④写入策略" class="headerlink" title="④写入策略"></a>④写入策略</h5><h6 id="写回法"><a href="#写回法" class="headerlink" title="写回法"></a>写回法</h6><p><strong>定义</strong>：只修改cache的内容而不立即写入主存，只有当此行被替换出cache时才将脏数据写回主存。</p>
<p><strong>优点</strong>：可以显著减少写主存的次数</p>
<p><strong>缺点</strong>:cache与主存中数据的不一致性，每个cache行必须配置一个修改位</p>
<h6 id="写穿法"><a href="#写穿法" class="headerlink" title="写穿法"></a>写穿法</h6><p><strong>定义：</strong>同时对cache和主存中的同一数据块进行修改</p>
<p><strong>优点</strong>：无需设置一个修改位以及相应的的判别逻辑，被换处的数据库可以直接丢弃</p>
<p><strong>缺点</strong>：cache对CPU的写操作没有缓冲功能，降低了cache的功效</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621102826883.png" alt="image-20220621102826883"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image20220621100327.jpg" alt="image20220621100327"></p>
<h4 id="5、虚拟存储器"><a href="#5、虚拟存储器" class="headerlink" title="5、虚拟存储器"></a>5、虚拟存储器</h4><h5 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h5><p><strong>定义</strong>：虚拟存储器是建立在<strong>主存与辅存物理结构基础</strong>之上，由附加硬件装置以及操作系统存储管理软件组成的一种存储体系</p>
<p><strong>物理地址VA</strong>（Virtual Addresses）：CPU地址引脚送出，用于访问主存的地址。</p>
<p><strong>虚拟地址PA</strong>（Physical Addresses）：编译程序生成的，是程序的<strong>逻辑地址</strong>，其地址空间的大小受到辅助存储器容量的限制。</p>
<p><strong>MMU</strong>（Memory Management Unit）：存放虚拟地址与物理地址的对应关系，并判断这个虚拟地址对应的内容是否已经在主存中。<u>如果已经在主存中</u>，则通过MMU将虚拟地址转换成物理地址，CPU直接访问主存单元；<u>如果不在主存中</u>，则把包含这个字的一页或一个程序段调入主存，并在MMU中填写相关的标记信息。</p>
<p><strong>页表</strong>：<strong>页表常驻内存</strong>，每个进程都拥有独立的虚拟地址空间，每个进程都有一张完整的页表，页表属于进程控制信息</p>
<p><strong>PTE</strong>（Page Table Entry）：页表项（PPN）</p>
<p><strong>PTEA</strong>（Page Table Entry Addresses）：页表项地址</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621105217343.png" alt="image-20220621105217343"></p>
<p><strong>VPN</strong>（Virtual Page Number）：虚拟页号</p>
<p><strong>PPN</strong>（Physical Page Number）：物理页号</p>
<p><strong>VPO</strong>（Virtual Page Offset）：虚拟页偏移</p>
<p><strong>PPO</strong>（Physical Page Offset）:物理页偏移</p>
<p>VPO 和 PPO 的位数决定了<strong>页面大小</strong>，因为物理页和虚拟页大小相同，所以 VPO 和PPO 的位数相同</p>
<p>VPN 和PPN 的位宽则分别取决于<strong>虚拟空间的容量</strong>和<strong>主存空间的容量。</strong></p>
<h5 id="虚拟地址与物理地址转换过程"><a href="#虚拟地址与物理地址转换过程" class="headerlink" title="虚拟地址与物理地址转换过程"></a>虚拟地址与物理地址转换过程</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621105835779.png" alt="image-20220621105835779"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621111707965.png" alt="image-20220621111707965"></p>
<h5 id="结合cache的虚拟存储器访问流程"><a href="#结合cache的虚拟存储器访问流程" class="headerlink" title="结合cache的虚拟存储器访问流程"></a>结合cache的虚拟存储器访问流程</h5><p>cache会缓存主存中经常访问的数据，因此页表的部分数据块也会作为常用的热数据调度到cache中。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621112237171.png" alt="image-20220621112237171"></p>
<h5 id="x3D-x3D-利用TLB加速虚拟存储器地址转换-x3D-x3D"><a href="#x3D-x3D-利用TLB加速虚拟存储器地址转换-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;利用TLB加速虚拟存储器地址转换&#x3D;&#x3D;"></a>&#x3D;&#x3D;利用TLB加速虚拟存储器地址转换&#x3D;&#x3D;</h5><p>现代处理器都维护着一个转换旁路缓冲区( Translation Look-aside Buffer，TLB ),用于缓冲经常访问的页表项PTE。TLB本质上就是一个容量较小的cache，为提高查找速度，大多采用<strong>全相联或组相联方式</strong>，且采用<strong>随机替换算法</strong></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621112557708.png" alt="image-20220621112557708"></p>
<p>TLB离CPU更近，访问速度更快，所以通常将TLB表称为快表，而将主存中的页表称为慢表。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/1655782115458.jpg" alt="1655782115458"></p>
<h3 id="第五章-指令系统"><a href="#第五章-指令系统" class="headerlink" title="第五章 指令系统"></a>第五章 指令系统</h3><h4 id="1、指令系统设计"><a href="#1、指令系统设计" class="headerlink" title="1、指令系统设计"></a>1、指令系统设计</h4><h5 id="一条指令须明显或隐含包含的信息"><a href="#一条指令须明显或隐含包含的信息" class="headerlink" title="一条指令须明显或隐含包含的信息"></a>一条指令须明显或隐含包含的信息</h5><p><strong>操作码</strong>：指定操作类型<br>   (操作码长度：固定／可变)</p>
<p><strong>源操作数参照</strong>：一个或多个源操作数或所在的地址<br>   (操作数来源：主(虚)存&#x2F;寄存器&#x2F;I&#x2F;O端口&#x2F;指令本身）</p>
<p><strong>结果值参照</strong>：产生的结果存放何处（目的操作数）<br>   (结果地址：主(虚)存&#x2F;寄存器&#x2F;I&#x2F;O端口)</p>
<p><strong>下一条指令地址</strong>：下条指令存放何处<br>   (下条指令地址 ：主(虚)存)<br>   (正常情况隐含在PC中，改变顺序时由指令给出）</p>
<h5 id="x3D-x3D-寻址方式-x3D-x3D"><a href="#x3D-x3D-寻址方式-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;寻址方式&#x3D;&#x3D;"></a>&#x3D;&#x3D;寻址方式&#x3D;&#x3D;</h5><p><strong>指令寻址方式</strong>：顺序寻址，跳跃寻址</p>
<p>&#x3D;&#x3D;<strong>操作数寻址方式</strong>&#x3D;&#x3D;</p>
<p><strong>立即寻址</strong>：地址码字段是操作数本身</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121107777.png" alt="image-20220621121107777"></p>
<p><strong>寄存器寻址</strong>：操作数在CPU的内部寄存器中</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121131843.png" alt="image-20220621121131843"></p>
<p><strong>直接寻址</strong>：地址码字段直接给出操作数在内存的地址</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121205981.png" alt="image-20220621121205981"></p>
<p><strong>间接寻址</strong>：D单元的内容是操作数地址, D是操作数地址的地址</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121310081.png" alt="image-20220621121310081"></p>
<p><strong>寄存器间接寻址</strong>：D单元的内容是寄存器编号，以寄存器的内容为地址访问主存单元即可得到所需的操作数</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121637241.png" alt="image-20220621121637241"></p>
<p><strong>相对寻址</strong>：指令地址码给出一个偏移量(带符号数)，<strong>基准地址隐含由PC给出</strong>。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121828201.png" alt="image-20220621121828201"></p>
<p><strong>基址寻址</strong>：指令地址码给出一个<strong>偏移量</strong>，基准地址明显或隐含由基址寄存器B给出。</p>
<p>即：EA&#x3D;(B)+A   </p>
<p><strong>变址寻址</strong>：指令地址码给出一个<strong>基准地址</strong>，而偏移量(无符号数)明显或隐含由变址寄存器I 给出。</p>
<p>即：EA&#x3D;(I)+A</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621121943491.png" alt="image-20220621121943491"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220627225810542.png" alt="image-20220627225810542"></p>
<h6 id="x3D-x3D-例题-x3D-x3D"><a href="#x3D-x3D-例题-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;例题&#x3D;&#x3D;"></a>&#x3D;&#x3D;例题&#x3D;&#x3D;</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621122525552.png" alt="image-20220621122525552"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621122543162.png" alt="image-20220621122543162"></p>
<h5 id="x3D-x3D-扩展（变长）操作码编码-x3D-x3D"><a href="#x3D-x3D-扩展（变长）操作码编码-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;扩展（变长）操作码编码&#x3D;&#x3D;"></a>&#x3D;&#x3D;扩展（变长）操作码编码&#x3D;&#x3D;</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621122647181.png" alt="image-20220621122647181"></p>
<p>解:操作码按短到长进行扩展编码<br>     二地址指令: (0000 ～ 1110)<br>     一地址指令: 11110 (00000 ～ 11111); 11111 (00000 ～ 00001)<br>     零地址指令: 11111 (00010 ～ 11111) (000000 ～ 111111)<br>     故零地址指令最多有 30x2^6^&#x3D;15x2^7^ 种</p>
<h5 id="指令设计风格"><a href="#指令设计风格" class="headerlink" title="指令设计风格"></a>指令设计风格</h5><h6 id="复杂指令集计算机CISC-Complex-Instruction-Set-Computer"><a href="#复杂指令集计算机CISC-Complex-Instruction-Set-Computer" class="headerlink" title="复杂指令集计算机CISC (Complex Instruction Set Computer)"></a>复杂指令集计算机CISC (Complex Instruction Set Computer)</h6><p>早期CISC设计风格的主要特点<br>(1) 指令系统复杂<br>     变长操作码 &#x2F; 变长指令字 &#x2F; 指令多 &#x2F; 寻址方式多 &#x2F; 指令格式多<br>(2) 指令周期长<br>      绝大多数指令需要多个时钟周期才能完成<br>(3) 各种指令都能访问存储器<br>      除了专门的存储器读写指令外，运算指令也能访问存储器<br> (4) 采用微程序控制<br> (5) 有专用寄存器<br> (6) 难以进行编译优化来生成高效目标代码</p>
<h6 id="精简指令集计算机RISC-Reduce-Instruction-Set-Computer"><a href="#精简指令集计算机RISC-Reduce-Instruction-Set-Computer" class="headerlink" title="精简指令集计算机RISC (Reduce Instruction Set Computer)"></a>精简指令集计算机RISC (Reduce Instruction Set Computer)</h6><p>(1) 简化的指令系统<br>     指令少 &#x2F; 寻址方式少 &#x2F; 指令格式少 &#x2F; 指令长度一致<br>(2) 以RR方式工作<br>      除Load&#x2F;Store指令可访问存储器外，其余指令都只访问寄存器。<br>(3) 指令周期短<br>   以流水线方式工作， 因而除Load&#x2F;Store指令外，其他简单指令都只需一个或一个不到的时钟周期就可完成。<br> (4) 采用大量通用寄存器，以减少访存次数<br> (5) 采用组合逻辑电路控制，不用或少用微程序控制<br> (6)  采用优化的编译系统，力求有效地支持高级语言程序</p>
<h4 id="2、程序的机器级表示"><a href="#2、程序的机器级表示" class="headerlink" title="2、程序的机器级表示"></a>2、程序的机器级表示</h4><h5 id="MIPS概述"><a href="#MIPS概述" class="headerlink" title="MIPS概述"></a>MIPS概述</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621125104615.png" alt="image-20220621125104615"></p>
<h6 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220621125951532.png" alt="image-20220621125951532"></p>
<h6 id="操作指令"><a href="#操作指令" class="headerlink" title="操作指令"></a>操作指令</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image20220621130010.jpg" alt="image20220621130010"></p>
<h3 id="第六章-中央处理器"><a href="#第六章-中央处理器" class="headerlink" title="第六章  中央处理器"></a>第六章  中央处理器</h3><h4 id="1、中央处理器概述"><a href="#1、中央处理器概述" class="headerlink" title="1、中央处理器概述"></a>1、中央处理器概述</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622104938506.png" alt="image-20220622104938506"></p>
<p><strong>操作控制器主要功能</strong>： 循环取指、执行、处理异常</p>
<p>将<strong>机器指令译码</strong>并生成<strong>执行部件</strong>所需的<strong>控制信号序列</strong> ，控制信号按序送至各执行部件控点，引起逻辑门开闭，建立正确的<strong>数据通路</strong>，从而完成指令功能。</p>
<p><strong>控制器分类</strong></p>
<p>硬布线控制器   (时序逻辑型)  (硬件实现)</p>
<p>微程序控制器   (存储程序型)  (软件实现)</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622111201779.png" alt="image-20220622111201779"></p>
<h4 id="2、指令周期"><a href="#2、指令周期" class="headerlink" title="2、指令周期"></a>2、指令周期</h4><p><strong>时钟周期</strong> &#x3D; 节拍脉冲 &#x3D; 震荡周期                                    能完成一次<strong>微操作</strong></p>
<p><strong>机器周期</strong> &#x3D; CPU周期   从主存读出一条指令的<strong>最短时间</strong>    可完成    <strong>复杂操作</strong></p>
<p><strong>指令周期</strong>：从主存取一条指令并执行指令的时间</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622105653712.png" alt="image-20220622105653712"></p>
<p><strong>定长指令周期</strong>：    传统三级时序系统</p>
<p>​	机器周期数<strong>固定</strong>，节拍数<strong>固定</strong>，按<u><strong>机器周期同步</strong></u>，mips单周期</p>
<p><strong>变长指令周期</strong>：    现代时序系统</p>
<p>​	机器周期数<strong>可变</strong>，节拍数<strong>可变</strong>，按<u><strong>时钟周期同步</strong></u>，mips多周期</p>
<p>​	定长指令周期只是一种特例</p>
<h4 id="3、数据通路及指令操作流程"><a href="#3、数据通路及指令操作流程" class="headerlink" title="3、数据通路及指令操作流程"></a>3、数据通路及指令操作流程</h4><p><strong>数据通路</strong>——执行部件间传送信息的路径        (数据流)</p>
<p>通路的建立由<strong>控制信号控制</strong>，受<strong>时钟驱动</strong>   （控制流）</p>
<p><strong>分类</strong>：</p>
<ul>
<li>共享通路（总线）<ul>
<li>主要部件都连接在公共总线上，各部件间通过总线进行数据传输</li>
<li>结构简单，实现容易，但<strong>并发性较差</strong>，需分时使用总线，<strong>效率低</strong></li>
</ul>
</li>
<li>专用通路<ul>
<li>并发度高，性能佳，设计复杂，成本高</li>
<li>可以看作多总线结构</li>
</ul>
</li>
</ul>
<p><strong>数据通路定义</strong>：数据通路是由<strong>操作元件</strong>和<strong>存储元件</strong>通过<strong>总线方式</strong>或<strong>分散方式</strong>连接而成的进行<strong>数据存储、处理、传送</strong>的路径。</p>
<h5 id="x3D-x3D-单总线结构MIPC-CPU-典型指令-x3D-x3D"><a href="#x3D-x3D-单总线结构MIPC-CPU-典型指令-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;单总线结构MIPC CPU 典型指令&#x3D;&#x3D;"></a>&#x3D;&#x3D;单总线结构MIPC CPU 典型指令&#x3D;&#x3D;</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622112238032.png" alt="image-20220622112238032"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622112732969.png" alt="image-20220622112732969"></p>
<h4 id="4、时序与控制"><a href="#4、时序与控制" class="headerlink" title="4、时序与控制"></a>4、时序与控制</h4><h5 id="x3D-x3D-单总线结构CPU指令周期-x3D-x3D"><a href="#x3D-x3D-单总线结构CPU指令周期-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;单总线结构CPU指令周期&#x3D;&#x3D;"></a>&#x3D;&#x3D;单总线结构CPU指令周期&#x3D;&#x3D;</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622113506487.png" alt="image-20220622113506487"></p>
<h5 id="控制方式"><a href="#控制方式" class="headerlink" title="控制方式"></a>控制方式</h5><ul>
<li><strong>同步控制</strong><ul>
<li>机器周期数、节拍数固定       			 3机器周期*4节拍</li>
<li>机器周期数固定，节拍数不固定    	 3机器周期，取指&#x2F;计算&#x2F;执行 4&#x2F;2&#x2F;3节拍</li>
<li>大多数指令机器周期固定                   机器周期，节拍数按需分派</li>
</ul>
</li>
<li>异步控制<ul>
<li>无时钟，应答机制</li>
</ul>
</li>
<li>联合控制<ul>
<li>同步、异步相结合</li>
</ul>
</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622114240447.png" alt="image-20220622114240447"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622114251491.png" alt="image-20220622114251491"></p>
<h5 id="时序发生器"><a href="#时序发生器" class="headerlink" title="时序发生器"></a>时序发生器</h5><p><strong>循环产生</strong>周期电位、节拍电位，供控制器对信号进行时间调制</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622114419589.png" alt="image-20220622114419589"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220622114433801.png" alt="image-20220622114433801"></p>
<h4 id="5、硬布线控制器"><a href="#5、硬布线控制器" class="headerlink" title="5、硬布线控制器"></a>5、硬布线控制器</h4><h4 id="6、微程序控制器"><a href="#6、微程序控制器" class="headerlink" title="6、微程序控制器"></a>6、微程序控制器</h4><ul>
<li>控制信号序列像程序一样存储起来<ul>
<li>控制信号序列分解为若干节拍</li>
<li>一个节拍的并发信号编成一条微指令</li>
<li>多个节拍对应多条微指令，形成一段微程序依序</li>
</ul>
</li>
<li>执行微程序即可生成控制信号序列<ul>
<li>指令取指执行 → 微程序执行 → 微指令执行 →  生成控制信号</li>
<li>软时序：依次执行微指令，时间信号有先后顺序</li>
</ul>
</li>
</ul>
<h6 id="微程序-微指令-微命令-微操作的关系"><a href="#微程序-微指令-微命令-微操作的关系" class="headerlink" title="微程序\微指令\微命令\微操作的关系"></a>微程序\微指令\微命令\微操作的关系</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220624171615723.png" alt="image-20220624171615723"></p>
<p>一条微指令对应一个时钟周期</p>
<h6 id="下条微指令地址的确定方式"><a href="#下条微指令地址的确定方式" class="headerlink" title="下条微指令地址的确定方式"></a>下条微指令地址的确定方式</h6><ul>
<li><p>怎样控制微程序的执行顺序？</p>
<ul>
<li>通过在本条微指令中明显或隐含地指定下条微指令在控存中的地址来控制。</li>
</ul>
</li>
<li><p>微指令地址的产生方法有两种：</p>
<ul>
<li>增量(<strong>计数器</strong>)法：下条微指令地址隐含在微程序计数器μPC中。</li>
<li>断定(<strong>下址字段</strong>)法：在本条微指令中明显指定下条微指令地址。</li>
</ul>
</li>
<li><p>选择下条要执行的微指令有以下四种情况：</p>
<ul>
<li>取指微程序首址：每条指令执行前，CPU先执行取指微程序。</li>
<li>第一条微指令：每条指令取出后，必须转移到该指令对应的第一条微指令执行。</li>
<li>顺序执行时：微程序执行过程中顺序取出下条微指令执行。</li>
<li>分支执行时：在遇到按条件转移到不同微指令执行时，需要根据控制单元的输入来选择下条微指令。</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220625141423601.png" alt="image-20220625141423601"></p>
<p>eg.</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220625145114481.png" alt="image-20220625145114481"></p>
</li>
</ul>
<h6 id="微指令格式的设计"><a href="#微指令格式的设计" class="headerlink" title="微指令格式的设计"></a>微指令格式的设计</h6><ul>
<li><p>水平型微指令</p>
<ul>
<li><p>特点：</p>
<ul>
<li>并行操作能力强，效率高，执行时间短、灵活性强</li>
<li>微指令字较长，微程序短，控存容量大，性能佳</li>
<li>微操作码编码方式：</li>
</ul>
</li>
<li><p>微操作码编码方式：</p>
<ul>
<li>不译法（直接控制法）  </li>
<li>字段直接编码（译）法  </li>
<li>字段间接编码（译）法</li>
</ul>
</li>
</ul>
</li>
<li><p>垂直型微指令</p>
<ul>
<li><p>特点：</p>
<ul>
<li>字长短，微程序长，控存容量小，性能差</li>
<li>垂直型与指令相似，易于掌握</li>
<li>基本被淘汰</li>
</ul>
</li>
<li><p>微操作码编码方式：</p>
<ul>
<li>最小（最短、垂直）编码（译）法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="7、异常与中断处理"><a href="#7、异常与中断处理" class="headerlink" title="7、异常与中断处理"></a>7、异常与中断处理</h4><ul>
<li>内部异常<ul>
<li>故障（Fault）<ul>
<li>由指令执行引起的异常，如未定义指令、越权指令、段故障、缺页故障、存储保护违例、数据未对齐、除数为零、浮点溢出、整数溢出等。</li>
<li>可恢复的故障，指令需恢复执行，不可恢复故障，进程被终止</li>
</ul>
</li>
<li>自陷（ trap）<ul>
<li>是一种事先安排的“异常”事件，通过在程序中显式的调用自陷指令触发自陷异常，用于在用户态下调用操作系统内核程序，如系统调用、条件陷阱指令。</li>
</ul>
</li>
<li>终止（Abort）<ul>
<li>随机出现的使得 CPU 无法继续执行的硬件故障，和具体指令无关。如机器校验错、总线错误、异常处理中再次异常的双错等，此时当前程序无法继续执行，只能终止执行，由异常服务处理程序来重启系统</li>
</ul>
</li>
</ul>
</li>
<li>外部中断</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220625161837447.png" alt="image-20220625161837447"></p>
<h3 id="第七章-指令流水线"><a href="#第七章-指令流水线" class="headerlink" title="第七章 指令流水线"></a>第七章 指令流水线</h3><h4 id="7-1-流水线概述"><a href="#7-1-流水线概述" class="headerlink" title="7.1 流水线概述"></a>7.1 流水线概述</h4><p>单周期完成n条指令需要  <strong>5nT</strong></p>
<p>指令流水线完成n条指令的时间&#x3D;完成第一条指令时间 <strong>5T+(n-1) * T&#x3D;(n+4)T</strong> </p>
<h4 id="7-2-流水线数据通路"><a href="#7-2-流水线数据通路" class="headerlink" title="7.2 流水线数据通路"></a>7.2 流水线数据通路</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626101834605.png" alt="image-20220626101834605"></p>
<h4 id="7-3-流水线冲突与处理"><a href="#7-3-流水线冲突与处理" class="headerlink" title="7.3 流水线冲突与处理"></a>7.3 流水线冲突与处理</h4><h5 id="x3D-x3D-指令流水线的冲突、相关、冒险（hazard）-x3D-x3D"><a href="#x3D-x3D-指令流水线的冲突、相关、冒险（hazard）-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;指令流水线的冲突、相关、冒险（hazard）&#x3D;&#x3D;"></a>&#x3D;&#x3D;指令流水线的冲突、相关、冒险（hazard）&#x3D;&#x3D;</h5><ul>
<li>结构冲突<ul>
<li><strong>争用主存</strong>：IF段取指令、ID段取操作数</li>
<li><strong>争用ALU</strong>：多周期方案中计算PC、分支地址，运算指令 </li>
<li><strong>解决方案</strong>：<strong>增加部件消除</strong></li>
</ul>
</li>
<li>控制冲突<ul>
<li>提前取出的指令作废，流水线清空</li>
<li>流水线发生中断</li>
</ul>
</li>
<li>数据冲突<ul>
<li>指令操作数依赖于前一条指令的执行结果       ADD $s1, $s2, $s3</li>
<li>引起流水线停顿直到数据写回                        ADD $s4, $s1, $s3</li>
</ul>
</li>
</ul>
<h5 id="控制冲突总结"><a href="#控制冲突总结" class="headerlink" title="控制冲突总结"></a>控制冲突总结</h5><ul>
<li><strong>指令跳转</strong><ul>
<li>IF段重新取新的指令</li>
</ul>
</li>
<li><strong>清除误取指令</strong><ul>
<li>IF&#x2F;ID、ID&#x2F;EX段给出同步清零信号</li>
</ul>
</li>
<li><strong>分支指令执行阶段</strong>？<ul>
<li>越早执行，性能损失越小</li>
<li>MIPS中通常为ID段执行，为了简化中断，重定向机制，可在EX段执行</li>
</ul>
</li>
<li><strong>分支延迟槽技术</strong><ul>
<li>配合ID段执行分支指令，彻底消除分支带来的流水性能损失</li>
<li>如何将有用的指令载入延迟槽比较关键</li>
<li>X86中没有分支延迟槽，采用动态分支预测技术</li>
</ul>
</li>
</ul>
<h5 id="数据相关处理机制"><a href="#数据相关处理机制" class="headerlink" title="数据相关处理机制"></a>数据相关处理机制</h5><ul>
<li><strong>软件方法</strong>（编译器完成）<ul>
<li>插入空指令</li>
<li>调整程序顺序，使相关性在流水线中消失</li>
</ul>
</li>
<li><strong>硬件方法</strong><ul>
<li>插入气泡（空操作）<ul>
<li>向后段插入气泡（接口信号清零）</li>
<li>向前给出阻塞信号（流水线停顿）避免当前指令被新指令取代</li>
</ul>
</li>
<li>数据重定向bypass（数据旁路）<ul>
<li>将后端处理后的数据（还没来得及写回）重定向</li>
<li>数据在哪就从哪送到运算器</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626102439589.png" alt="image-20220626102439589"></p>
<h4 id="7-4-流水线的异常与中断"><a href="#7-4-流水线的异常与中断" class="headerlink" title="7.4 流水线的异常与中断"></a>7.4 流水线的异常与中断</h4><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626102938743.png" alt="image-20220626102938743"></p>
<h4 id="7-5-指令集并行技术"><a href="#7-5-指令集并行技术" class="headerlink" title="7.5 指令集并行技术"></a>7.5 指令集并行技术</h4><ul>
<li><strong>超流水线</strong>(superpipelined)<ul>
<li>技术主要通过增加流水线功能段数目，尽可能细化减少各段关键延迟，从而提高流水线主频的方式提升流水线性能，例如Pentium pro的流水线就多达14段</li>
</ul>
</li>
<li><strong>多发射</strong> (multiple issue)<ul>
<li>复制计算机内部功能部件的数量，使各流水功能段能同时处理多条指令，处理器一次可以发射多条指令进入流水线进行处理。引起更多的相关性，冲突冒险问题更难处理</li>
</ul>
</li>
<li><strong>静态多发射</strong><ul>
<li>冲突冒险全部交给编译器静态解决</li>
</ul>
</li>
<li><strong>动态多发射</strong><ul>
<li>由硬件动态处理多发射流水线运行过程中出现的各种冲突冒险</li>
<li>也称为超标量 (superscalar)技术</li>
</ul>
</li>
</ul>
<h3 id="第八章-互连及输入输出组织"><a href="#第八章-互连及输入输出组织" class="headerlink" title="第八章 互连及输入输出组织"></a>第八章 互连及输入输出组织</h3><h4 id="1、总线及系统传输机制"><a href="#1、总线及系统传输机制" class="headerlink" title="1、总线及系统传输机制"></a>1、总线及系统传输机制</h4><h5 id="总线性能指标"><a href="#总线性能指标" class="headerlink" title="总线性能指标"></a>总线性能指标</h5><ul>
<li><p>总线频率：反映总线工作的速率（f），通常单位是MHz</p>
</li>
<li><p>总线宽度：数据总线的位数(w)，单位是b(位)</p>
<p>是微型计算机的一个重要指标，通常与处理器的字长相一致</p>
</li>
<li><p>总线传输速率：总线上可传输的数据总量（BW），单位是MB&#x2F;S</p>
<ul>
<li>总线传输速率&#x3D;（总线宽度÷8位)×总线频率</li>
<li>BW&#x3D;(w÷8)×f</li>
</ul>
</li>
</ul>
<h4 id="2、总线传输机制"><a href="#2、总线传输机制" class="headerlink" title="2、总线传输机制"></a>2、总线传输机制</h4><h5 id="总线传输过程"><a href="#总线传输过程" class="headerlink" title="总线传输过程"></a>总线传输过程</h5><ul>
<li>总线申请: （总线仲裁）<ul>
<li>需要使用总线的主部件提出请求，总线控制器确定将下一个总线使用权分配给谁</li>
</ul>
</li>
<li>地址阶段: （总线寻址）<ul>
<li>主设备通过总线发出从部件的存储器地址或I&#x2F;O端口地址及相关命令，启动从设备</li>
</ul>
</li>
<li>数据阶段:  (数据传输）</li>
<li>结束阶段:<ul>
<li>主部件撤消总线请求等有关信息，让出总线，以便总线控制器重新分配总线使用权</li>
</ul>
</li>
</ul>
<h5 id="总线事务"><a href="#总线事务" class="headerlink" title="总线事务"></a>总线事务</h5><ul>
<li>总线事务：总线上主从设备之间的一次信息交换过程<ul>
<li>一个总线周期中发生的一系列活动:  请求阶段、寻址阶段、传输阶段、结束阶段</li>
<li>典型事务：存储器读，存储器写，I&#x2F;O读，I&#x2F;O写，中断响应，DMA响应</li>
</ul>
</li>
<li>突发(猝发)传送事务（Burst Mode 成组传送）<ul>
<li>多个数据阶段，传输过程不释放总线</li>
</ul>
</li>
</ul>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626145754276.png" alt="image-20220626145754276"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626150040978.png" alt="image-20220626150040978"></p>
<h5 id="x3D-x3D-总线的仲裁-x3D-x3D"><a href="#x3D-x3D-总线的仲裁-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;总线的仲裁&#x3D;&#x3D;"></a>&#x3D;&#x3D;总线的仲裁&#x3D;&#x3D;</h5><ul>
<li><p>总线仲裁：对总线的使用进行合理的分配和管理.</p>
<ul>
<li>部件要使用总线进行通信时,要向控制部件发请求信号</li>
<li>控制部件按各部件的优先级来决定谁使用总线</li>
</ul>
</li>
<li><p>根据总线控制部件的位置,仲裁方式分两类</p>
<ul>
<li>集中式总线仲裁<ul>
<li>链式查询方式</li>
<li>计数器定时查询方式</li>
<li>独立请求方式</li>
</ul>
</li>
<li>分布式总线仲裁</li>
</ul>
</li>
</ul>
<p><strong>链式查询方式</strong></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626150433399.png" alt="image-20220626150433399"></p>
<p><strong>计数器定时查询方式</strong></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626150452836.png" alt="image-20220626150452836"></p>
<p><strong>独立请求方式</strong></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626150506969.png" alt="image-20220626150506969"></p>
<table>
<thead>
<tr>
<th></th>
<th><strong>链式查询方式</strong></th>
<th><strong>计数器定时查询</strong></th>
<th><strong>独立请求方式</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>控制线</strong></td>
<td>BS、BR、BG 共3根</td>
<td>BS、BR、log2n共 2+log2n</td>
<td>n组（BR、BG）共2n根</td>
</tr>
<tr>
<td><strong>响应速度</strong></td>
<td>慢</td>
<td>慢</td>
<td>快</td>
</tr>
<tr>
<td><strong>优先级</strong></td>
<td>优先级固定</td>
<td>可作适当变化</td>
<td>可作灵活的变化</td>
</tr>
<tr>
<td><strong>故障敏感度</strong></td>
<td>非常敏感</td>
<td>不敏感</td>
<td>不敏感</td>
</tr>
<tr>
<td><strong>扩展方式</strong></td>
<td>容易</td>
<td>难</td>
<td>容易</td>
</tr>
</tbody></table>
<h4 id="3、I-x2F-O设备与主机进行数据交换的三种基本方式"><a href="#3、I-x2F-O设备与主机进行数据交换的三种基本方式" class="headerlink" title="3、I&#x2F;O设备与主机进行数据交换的三种基本方式"></a>3、I&#x2F;O设备与主机进行数据交换的三种基本方式</h4><ul>
<li><strong>程序直接控制方式</strong>（最简单的I&#x2F;O方式）<ul>
<li>无条件传送：对简单外设定时（同步）进行数据传送</li>
<li>条件传送：Polling (轮询，查询):  OS主动查询，也称为程序查询方式<ul>
<li>I&#x2F;O设备（包括I&#x2F;O接口）将自己的状态放到一个状态寄存器中 </li>
<li>OS阶段性地查询状态寄存器中的特定状态，以决定下一步动作</li>
</ul>
</li>
</ul>
</li>
<li><strong>I&#x2F;O Interrupt (中断I&#x2F;O方式)</strong>: 几乎所有系统都支持的中断I&#x2F;O方式<ul>
<li>若一个I&#x2F;O设备需要CPU干预，它就通过中断请求通知CPU</li>
<li>CPU中止当前程序的执行，调出OS（中断处理程序）来执行</li>
<li>处理结束后，再返回到被中止的程序继续执行</li>
<li>OS是被动调出的，也称为中断驱动I&#x2F;O方式</li>
</ul>
</li>
<li><strong>Direct Memory Access (DMA方式)</strong>: 磁盘等高速外设特有的I&#x2F;O方式<ul>
<li>磁盘等高速外设成批地直接和主存进行数据交换</li>
<li>需要专门的DMA控制器控制总线，完成数据传送</li>
<li>当外设准备好数据后，向DMA控制器发DMA请求信号，DMA控制器再向CPU发总线请求，CPU让出总线后，由DMA控制器控制总线进行传输，无需CPU干涉</li>
</ul>
</li>
</ul>
<h5 id="中断I-x2F-O方式"><a href="#中断I-x2F-O方式" class="headerlink" title="中断I&#x2F;O方式"></a>中断I&#x2F;O方式</h5><p> 当外设准备好时，便向CPU发中断请求，CPU响应后，中止现行程序的执行，转入一个“中断服务程序”进行输入&#x2F;出操作，实现主机和外设接口之间的数据传送，并启动外设工作。 “中断服务程序”执行完后，返回原被中止的程序断点处继续执行。此时，外设和CPU并行工作。</p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626152350654.png" alt="image-20220626152350654"></p>
<h6 id="同时中断请求的处理方法"><a href="#同时中断请求的处理方法" class="headerlink" title="同时中断请求的处理方法"></a>同时中断请求的处理方法</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626152621852.png" alt="image-20220626152621852"></p>
<h6 id="划分优先级的一般规律"><a href="#划分优先级的一般规律" class="headerlink" title="划分优先级的一般规律"></a>划分优先级的一般规律</h6><ul>
<li>硬件故障中断属于最高级，其次是程序错误中断</li>
<li>非屏蔽中断优于可屏蔽中断</li>
<li>DMA请求优先于I&#x2F;O设备传送的中断请求</li>
<li>高速设备优于低速设备</li>
<li>输入设备的中断优于输出设备</li>
<li>实时设备优先于普通设备</li>
</ul>
<h6 id="多重中断的概念"><a href="#多重中断的概念" class="headerlink" title="多重中断的概念"></a>多重中断的概念</h6><ul>
<li><p>多重中断和中断处理优先权的动态分配</p>
<ul>
<li><p>多重中断的概念：</p>
<p>在一个中断处理（即执行中断服务程序）过程中，若又有新的中断请求发生，而新中断优先级高于正在执行的中断，则应立即中止正在执行的中断服务程序，转去处理新的中断。这种情况为多重中断，也称中断嵌套。</p>
</li>
</ul>
</li>
<li><p>中断优先级的概念：</p>
<ul>
<li>中断响应优先级—-由查询程序或硬联排队线路决定的优先权，反映多个中断同时请求时选择哪个响应。</li>
<li>中断处理优先级—-由各自的中断屏蔽字来动态设定，反映本中断与其它中断间的关系。</li>
</ul>
</li>
</ul>
<h6 id="中断屏蔽字"><a href="#中断屏蔽字" class="headerlink" title="中断屏蔽字"></a>中断屏蔽字</h6><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626154643907.png" alt="image-20220626154643907"></p>
<h5 id="DMA方式"><a href="#DMA方式" class="headerlink" title="DMA方式"></a>DMA方式</h5><h6 id="DMA数据传送方式"><a href="#DMA数据传送方式" class="headerlink" title="DMA数据传送方式"></a>DMA数据传送方式</h6><p>由于DMA接口和CPU共享主存，所以可能出现两者争用主存的现象，为使两者协调使用主存，DMA通常采用以下三种方式进行数据传送。</p>
<ol>
<li>CPU停止法(成组传送)</li>
</ol>
<p>  DMA传输时，CPU脱离总线，停止访问主存，直到DMA传送一块数据结束。<br>   <img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626154824645.png" alt="image-20220626154824645"></p>
<ol start="2">
<li>周期挪用(窃取)法(单字传送)</li>
</ol>
<p>  DMA传输时，CPU让出一个总线事务周期，由DMA控制总线来访问主存，传送完一个数据后立即释放总线。</p>
<p>   <img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626154859080.png" alt="image-20220626154859080"></p>
<ol start="3">
<li>交替分时访问法</li>
</ol>
<p>  每个存储周期分成两个时间片，一个给CPU，一个给DMA，这样在每个存储周期内，CPU和DMA都可访问存储器。</p>
<p>   <img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626154849726.png" alt="image-20220626154849726"></p>
<h5 id="x3D-x3D-例题：中断、DMA方式下CPU的开销-x3D-x3D"><a href="#x3D-x3D-例题：中断、DMA方式下CPU的开销-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;例题：中断、DMA方式下CPU的开销&#x3D;&#x3D;"></a>&#x3D;&#x3D;例题：中断、DMA方式下CPU的开销&#x3D;&#x3D;</h5><p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626155407232.png" alt="image-20220626155407232"></p>
<p><img src="/../pic/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.assets/image-20220626155411957.png" alt="image-20220626155411957"></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Daniel</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://eatingcrime.github.io/2022/06/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">https://eatingcrime.github.io/2022/06/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Daniel</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/07/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="计算机网络">
                        
                        <span class="card-title">计算机网络</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-07-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/log/" class="post-category">
                                    log
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/06/16/%E9%9D%A2%E8%AF%95/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="面试Record">
                        
                        <span class="card-title">面试Record</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-06-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/log/" class="post-category">
                                    log
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="917184825"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2023</span>
            
            <a href="/about" target="_blank">Daniel</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/eatingcrime" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1012375523@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=101237523" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 101237523" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    
        <!-- <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script> -->
        <script src='/libs/mermaid/mermaid.min.js'></script>
        <script>
          if (window.mermaid) {
            mermaid.initialize({theme: 'forest'});
          }
        </script>
    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/star.js"><\/script>');
            }
        </script>
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
